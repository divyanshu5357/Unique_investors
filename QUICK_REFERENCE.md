# Quick Reference Card - Role-Based Plot Drawers

## ğŸ¯ At a Glance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ROLEBASED PLOT DETAIL DRAWER                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Admin View         â”‚ Broker View                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… All statuses    â”‚ âœ… Booked & Sold only (read-only)         â”‚
â”‚ âœ… Edit/Delete     â”‚ âŒ Cannot edit/delete                     â”‚
â”‚ âœ… Add payments    â”‚ âŒ Cannot add payments                    â”‚
â”‚ âœ… 9 tabs         â”‚ âœ… 6 tabs (no admin-only)                 â”‚
â”‚ âœ… Commission     â”‚ âŒ No commission tab                       â”‚
â”‚ âœ… Notes          â”‚ âŒ No notes tab                            â”‚
â”‚ âœ… History        â”‚ âŒ No history tab                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PAYMENT INSTALLMENT DRAWER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Summary Tab        â”‚ Installments Tab â”‚ History Tab             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Total paid       â”‚ â€¢ All            â”‚ â€¢ Timeline view        â”‚
â”‚ â€¢ Total due        â”‚   installments   â”‚ â€¢ Paid events         â”‚
â”‚ â€¢ Balance          â”‚ â€¢ Amounts        â”‚ â€¢ Dates & amounts     â”‚
â”‚ â€¢ Progress %       â”‚ â€¢ Methods        â”‚ â€¢ Visual design       â”‚
â”‚ â€¢ Late fees        â”‚ â€¢ Receipts       â”‚                        â”‚
â”‚ â€¢ Next due date    â”‚ â€¢ Status badges  â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Quick Start (3 Steps)

### Step 1: Import
```typescript
import { RoleBasedPlotDetailDrawer } from '@/components/admin/RoleBasedPlotDetailDrawer';
import { PaymentInstallmentDrawer } from '@/components/admin/PaymentInstallmentDrawer';
```

### Step 2: Create State
```typescript
const [selectedPlot, setSelectedPlot] = useState(null);
const [isOpen, setIsOpen] = useState(false);
```

### Step 3: Render
```typescript
<RoleBasedPlotDetailDrawer
    isOpen={isOpen}
    onClose={() => setIsOpen(false)}
    plot={selectedPlot}
    userRole="admin"
/>
```

---

## ğŸ“ File Structure

```
src/components/admin/
â”œâ”€â”€ RoleBasedPlotDetailDrawer.tsx          â† Main drawer (700 lines)
â”œâ”€â”€ PaymentInstallmentDrawer.tsx           â† Payment drawer (450 lines)
â””â”€â”€ PlotDetailDrawersSampleIntegration.tsx â† Full example (350 lines)

Root Directory
â”œâ”€â”€ ROLE_BASED_DRAWERS_GUIDE.md           â† Detailed guide
â”œâ”€â”€ PLOT_DRAWERS_README.md                â† Quick reference
â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md             â† Complete summary
â””â”€â”€ QUICK_REFERENCE.md                    â† This file

Database
â””â”€â”€ supabase/migrations/
    â””â”€â”€ 20250105_create_payment_installments.sql
```

---

## ğŸ¯ Component Usage Patterns

### Admin Page Pattern
```typescript
'use client'
import { RoleBasedPlotDetailDrawer } from '@/components/admin/RoleBasedPlotDetailDrawer';

export default function AdminPage() {
    const [plot, setPlot] = useState(null);
    const [open, setOpen] = useState(false);

    return (
        <>
            <Table>
                {plots.map(p => (
                    <Button onClick={() => { setPlot(p); setOpen(true); }}>View</Button>
                ))}
            </Table>
            
            <RoleBasedPlotDetailDrawer
                isOpen={open}
                onClose={() => setOpen(false)}
                plot={plot}
                userRole="admin"
                onEdit={handleEdit}
                onDelete={handleDelete}
            />
        </>
    );
}
```

### Broker Page Pattern
```typescript
'use client'
import { RoleBasedPlotDetailDrawer } from '@/components/admin/RoleBasedPlotDetailDrawer';
import { PaymentInstallmentDrawer } from '@/components/admin/PaymentInstallmentDrawer';

export default function BrokerPage() {
    const [plot, setPlot] = useState(null);
    const [plotOpen, setPlotOpen] = useState(false);
    const [paymentOpen, setPaymentOpen] = useState(false);
    const [installments, setInstallments] = useState([]);

    return (
        <>
            <Button onClick={() => { setPlot(p); setPlotOpen(true); }}>Details</Button>
            <Button onClick={() => { setPlot(p); setPaymentOpen(true); }}>Payment</Button>
            
            <RoleBasedPlotDetailDrawer
                isOpen={plotOpen}
                onClose={() => setPlotOpen(false)}
                plot={plot}
                userRole="broker"
            />
            
            <PaymentInstallmentDrawer
                isOpen={paymentOpen}
                onClose={() => setPaymentOpen(false)}
                plot={plot}
                installments={installments}
                userRole="broker"
            />
        </>
    );
}
```

---

## ğŸ¨ Colors & Status

### Status Badges
```
Available  â†’ Green   (bg-green-100 text-green-800)
Booked     â†’ Yellow  (bg-yellow-100 text-yellow-800)
Sold       â†’ Red     (bg-red-100 text-red-800)
Cancelled  â†’ Gray    (bg-gray-100 text-gray-800)
```

### Payment Status
```
Paid       â†’ Green   (Check icon)
Unpaid     â†’ Red     (Alert icon)
Partial    â†’ Yellow  (Clock icon)
```

### Amount Colors
```
Paid Amount     â†’ Green  (â‚¹X)
Balance Due     â†’ Orange (â‚¹X)
Late Fees       â†’ Red    (â‚¹X)
Progress Bar    â†’ Blue gradient
```

---

## ğŸ“Š Tab Visibility

| Tab | Admin | Broker |
|-----|:-----:|:------:|
| Overview | âœ… | âœ… |
| Specs | âœ… | âœ… |
| Pricing | âœ… | âœ… |
| Booking | âœ… | âœ… |
| Payment | âœ… | âœ… |
| Sale | âœ… | âœ… |
| Commission | âœ… | âŒ |
| Notes | âœ… | âŒ |
| History | âœ… | âŒ |

---

## ğŸ”˜ Button Visibility

| Button | Admin Available | Admin Booked | Admin Sold | Broker |
|--------|:---------------:|:------------:|:----------:|:------:|
| Edit | âœ… | âŒ | âŒ | âŒ |
| Delete | âœ… | âŒ | âŒ | âŒ |
| Add Payment | âŒ | âœ… | âŒ | âŒ |
| Cancel Booking | âŒ | âœ…* | âŒ | âŒ |
| Mark as Sold | âŒ | âœ…** | âŒ | âŒ |
| Print | âœ… | âœ… | âœ… | âœ… |

*Only if < 50% paid
**Only if â‰¥ 50% paid

---

## ğŸ”’ Access Control Rules

### Plot Access
```
Admin:  View ALL statuses (Available, Booked, Sold, Cancelled)
Broker: View ONLY (Booked, Sold) in READ-ONLY mode
```

### Tab Access
```
Admin:  See all 9 tabs
Broker: See only 6 tabs (no Commission, Notes, History)
```

### Action Access
```
Admin:  Edit, Delete, Add Payment, Cancel, Convert to Sold, Print
Broker: View, Print ONLY
```

### Information Access
```
Admin:  See all fields including commission and internal notes
Broker: See only relevant booking/payment information
```

---

## ğŸ“± Responsive Breakpoints

```
Mobile (< 640px)    â†’ Single column, optimized layout
Tablet (640-1024px) â†’ Two columns where appropriate
Desktop (> 1024px)  â†’ Full three-column layout
```

---

## âš¡ Props Cheat Sheet

### RoleBasedPlotDetailDrawer
```typescript
{
    isOpen: boolean,
    onClose: () => void,
    plot: Plot | null,
    userRole: 'admin' | 'broker',
    onEdit?: (plot: Plot) => void,
    onDelete?: (plotId: string) => void,
    onAddPayment?: (plot: Plot) => void,
    onCancel?: (plotId: string) => void,
    onConvertToSold?: (plot: Plot) => void,
    onPrint?: (plot: Plot) => void,
}
```

### PaymentInstallmentDrawer
```typescript
{
    isOpen: boolean,
    onClose: () => void,
    plot: Plot | null,
    installments?: PaymentInstallment[],
    userRole: 'admin' | 'broker',
    onDownloadReceipt?: (installmentId: string) => void,
    onPrint?: (plot: Plot) => void,
}
```

---

## ğŸ” Common Tasks

### Open Plot Drawer
```typescript
const [plot, setPlot] = useState(null);
const [open, setOpen] = useState(false);

// When clicking a plot
setPlot(selectedPlot);
setOpen(true);
```

### Close Drawer
```typescript
setOpen(false);
setPlot(null);
```

### Handle Admin Action
```typescript
onEdit={(plot) => {
    console.log('Editing:', plot);
    // Open edit dialog
}}
```

### Handle Broker Print
```typescript
onPrint={(plot) => {
    window.print();
}}
```

### Show Payment Details
```typescript
<PaymentInstallmentDrawer
    plot={selectedPlot}
    installments={installmentsData}
    userRole="broker"
    isOpen={paymentDrawerOpen}
    onClose={() => setPaymentDrawerOpen(false)}
/>
```

---

## ğŸ› Troubleshooting

| Issue | Solution |
|-------|----------|
| Drawer not opening | Check `isOpen={true}` and `plot != null` |
| No tabs visible | Ensure plot data is provided |
| Broker sees restricted | Plot status must be 'booked' or 'sold' |
| No buttons visible | Check `userRole` is 'admin' for actions |
| Installments empty | Provide `installments=[]` or data array |

---

## ğŸ“š Documentation Files

| File | Purpose |
|------|---------|
| `ROLE_BASED_DRAWERS_GUIDE.md` | Comprehensive feature guide |
| `PLOT_DRAWERS_README.md` | Quick start & reference |
| `IMPLEMENTATION_SUMMARY.md` | Complete technical details |
| `QUICK_REFERENCE.md` | This cheat sheet |

---

## ğŸ¯ Implementation Checklist

- [ ] Install components in project
- [ ] Run database migration
- [ ] Import in your page
- [ ] Add state management
- [ ] Render drawer component
- [ ] Pass correct user role
- [ ] Test with admin account
- [ ] Test with broker account
- [ ] Test different plot statuses
- [ ] Test payment drawer
- [ ] Verify responsive design
- [ ] Connect to real data

---

## ğŸš€ Deploy Checklist

- [ ] Components compile without errors
- [ ] Database migrations applied
- [ ] RLS policies enabled
- [ ] Authentication working
- [ ] Role assignments correct
- [ ] Test in production environment
- [ ] Monitor error logs
- [ ] Gather user feedback

---

## ğŸ’¡ Pro Tips

1. **Use the sample integration** as a template for your implementation
2. **Test role-based access** thoroughly before deployment
3. **Customize colors** to match your brand in the status config
4. **Add real installment data** from your database
5. **Implement PDF receipts** for better user experience
6. **Add email notifications** for payment reminders
7. **Monitor audit logs** for compliance

---

## ğŸ“ Quick Links

- ğŸ“ Components: `src/components/admin/`
- ğŸ“– Guides: Root directory `*.md` files
- ğŸ—„ï¸ Database: `supabase/migrations/20250105_*`
- ğŸ’» Example: `PlotDetailDrawersSampleIntegration.tsx`

---

## âœ… Feature Checklist

### RoleBasedPlotDetailDrawer
- [x] Admin full access
- [x] Broker read-only access
- [x] Role-based tab visibility
- [x] Role-based button visibility
- [x] Access restriction messages
- [x] All plot information
- [x] Commission details
- [x] Internal notes
- [x] Audit history
- [x] Print functionality

### PaymentInstallmentDrawer
- [x] Payment summary
- [x] Installment tracking
- [x] Payment history timeline
- [x] Status indicators
- [x] Late fee tracking
- [x] Receipt downloads (admin)
- [x] Print statements
- [x] Export capability

---

## ğŸ“ Learning Path

1. **Start:** Read `QUICK_REFERENCE.md` (this file)
2. **Learn:** Read `PLOT_DRAWERS_README.md`
3. **Understand:** Read `ROLE_BASED_DRAWERS_GUIDE.md`
4. **Practice:** Use `PlotDetailDrawersSampleIntegration.tsx`
5. **Integrate:** Apply to your pages
6. **Test:** Verify all functionality
7. **Deploy:** Release to production

---

Generated: December 5, 2025
Version: 1.0
Status: âœ… Production Ready
